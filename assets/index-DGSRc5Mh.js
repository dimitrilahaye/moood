const S={moodOptions:[{value:5,label:"GÃ©nial",emotion:"Joie, gratitude, Ã©nergie",emoji:"ðŸŸ¢",color:"#4ade80"},{value:4,label:"Bien",emotion:"Calme, satisfaction, sÃ©rÃ©nitÃ©",emoji:"ðŸŸ¢",color:"#86efac"},{value:3,label:"Neutre",emotion:'Fatigue lÃ©gÃ¨re, routine, "Ã§a va"',emoji:"ðŸŸ¡",color:"#fde047"},{value:2,label:"Bof",emotion:"Stress, tristesse, agacement",emoji:"ðŸŸ ",color:"#fb923c"},{value:1,label:"Mauvais",emotion:"ColÃ¨re, dÃ©prime, Ã©puisement",emoji:"ðŸ”´",color:"#f87171"}]},N={success:"Mood enregistrÃ© avec succÃ¨s !",error:"Erreur lors de l'enregistrement du mood"};function x({moodOptions:n}){const o=document.createElement("section");o.className="mood-form-section";const e=document.createElement("form");e.className="mood-form",e.id="mood-form";const t=document.createElement("div");t.className="datetime-container";const a=document.createElement("label");a.textContent="Date",a.htmlFor="mood-date";const m=document.createElement("input");m.type="date",m.id="mood-date",m.name="date",m.required=!0;const i=document.createElement("label");i.textContent="Heure",i.htmlFor="mood-time";const c=document.createElement("input");c.type="time",c.id="mood-time",c.name="time",c.required=!0,t.appendChild(a),t.appendChild(m),t.appendChild(i),t.appendChild(c);const l=document.createElement("div");l.className="mood-options-container";const C=document.createElement("label");C.textContent="Comment vous sentez-vous ?",l.appendChild(C);const v=document.createElement("div");v.className="mood-options",n.forEach(s=>{const p=document.createElement("div");p.className="mood-option";const d=document.createElement("input");d.type="radio",d.id=`mood-${s.value}`,d.name="mood",d.value=String(s.value),d.required=!0;const r=document.createElement("label");r.htmlFor=`mood-${s.value}`,r.className="mood-option-label",r.style.backgroundColor=s.color;const h=document.createElement("span");h.className="mood-emoji",h.textContent=s.emoji;const f=document.createElement("div");f.className="mood-text-container";const g=document.createElement("span");g.className="mood-text",g.textContent=`${s.value} - ${s.label}`;const E=document.createElement("span");E.className="mood-emotion",E.textContent=s.emotion,f.appendChild(g),f.appendChild(E),r.appendChild(h),r.appendChild(f),p.appendChild(d),p.appendChild(r),v.appendChild(p)}),l.appendChild(v);const u=document.createElement("button");return u.type="submit",u.className="submit-button",u.textContent="Enregistrer",e.appendChild(t),e.appendChild(l),e.appendChild(u),o.appendChild(e),o}function y(){const n=document.createElement("nav");n.className="main-navigation";const o=document.createElement("a");o.href="#",o.textContent="Accueil",o.className="nav-link active";const e=document.createElement("a");e.href="#",e.textContent="Mes Moods",e.className="nav-link";const t=document.createElement("a");return t.href="#",t.textContent="Bilans",t.className="nav-link",n.appendChild(o),n.appendChild(e),n.appendChild(t),n}function M({moodsUseCase:n,onSuccess:o}){return async e=>{e.preventDefault();const t=e.target,a=new FormData(t),m=a.get("date"),i=a.get("time"),c=a.get("mood");if(!m||!i||!c)return;const[l,C,v]=String(m).split("-").map(Number),[u,s]=String(i).split(":").map(Number),p=new Date(l,C-1,v,u,s),d=Number(c);try{await n.create({note:d,datetime:p}),o()}catch(r){console.error("Erreur lors de la crÃ©ation du mood:",r)}}}function k({onSubmitHandler:n}){const o=document.getElementById("mood-form");o&&o.addEventListener("submit",n)}function D({onNavigate:n}){document.querySelectorAll(".nav-link").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const a=t.target,m=a.textContent==="Accueil"?"/":a.textContent==="Mes Moods"?"/list":a.textContent==="Bilans"?"/bilans":"/";n(m)})})}function b(){const n=new Date,o=document.getElementById("mood-date"),e=document.getElementById("mood-time");if(o){const t=n.getFullYear(),a=String(n.getMonth()+1).padStart(2,"0"),m=String(n.getDate()).padStart(2,"0");o.value=`${t}-${a}-${m}`}if(e){const t=String(n.getHours()).padStart(2,"0"),a=String(n.getMinutes()).padStart(2,"0");e.value=`${t}:${a}`}}function F({message:n}){var a;const o=document.querySelector(".success-message");o&&o.remove();const e=document.createElement("div");e.className="success-message",e.textContent=n;const t=document.getElementById("mood-form");t&&((a=t.parentElement)==null||a.insertBefore(e,t),setTimeout(()=>{e.remove()},3e3))}function B({root:n,params:o,deps:e}){const t=y(),a=x({moodOptions:S.moodOptions});n.appendChild(t),n.appendChild(a),b();const m=M({moodsUseCase:e.moodsUseCase,onSuccess:()=>{b(),document.querySelectorAll('input[name="mood"]').forEach(c=>{c.checked=!1}),F({message:N.success})}});k({onSubmitHandler:m}),D({onNavigate:i=>{const c=window.router;c&&c.navigate(i)}})}export{B as renderHomePage};
